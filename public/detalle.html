<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Detalle de ruta - Senda Infinita</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="/css/app.css">

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    #map {
      width: 100%;
      height: 400px;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body class="min-h-screen bg-[linear-gradient(135deg,_#A7D3E6_0%,_#A5B86C_50%,_#6BAA3D_100%)] text-[#1E4C6D]">
  <div id="header-placeholder"></div>

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6">
    <header class="rounded-2xl border border-[#7C7C6B]/40 bg-[#A7D3E6]/70 p-6 shadow-sm">
      <a href="index.html" class="text-sm font-medium text-[#1E4C6D] hover:text-[#8C6E4A]">&larr; Volver a la lista</a>
      <h1 id="route-title" class="mt-2 text-3xl font-semibold">Cargando ruta...</h1>
      <p id="route-meta" class="mt-2 text-[#1E4C6D]/80"></p>
      <p id="route-description" class="mt-2 text-[#1E4C6D]/80"></p>
      <p id="route-rating" class="mt-2 text-[#1E4C6D]/80"></p>
    </header>

    <main class="grid gap-6">
      <!-- Mapa -->
      <section class="rounded-2xl border border-[#7C7C6B]/40 bg-[#A5B86C]/45 p-6 shadow-sm">
        <h2 class="text-xl font-semibold">Mapa</h2>
        <div id="map" class="mt-4 rounded-xl border border-[#7C7C6B]/60 shadow-sm"></div>
        <p id="map-status" class="text-sm text-[#1E4C6D]/70"></p>
      </section>

      <!-- Favorito -->
      <section class="rounded-2xl border border-[#7C7C6B]/40 bg-[#A7D3E6]/70 p-6 shadow-sm">
        <h2 class="text-xl font-semibold">Favorito</h2>
        <button id="favorite-btn" type="button" class="mt-3 inline-flex items-center justify-center rounded-lg bg-[#1E4C6D] px-4 py-2 text-sm font-semibold text-[#A7D3E6] shadow hover:bg-[#6BAA3D] focus:outline-none focus:ring-2 focus:ring-[#1E4C6D]/40" disabled>
          Inicia sesión para marcar como favorita
        </button>
        <p id="favorite-status" class="mt-2 text-sm text-[#1E4C6D]/70"></p>
      </section>

      <!-- Fotos -->
      <section class="rounded-2xl border border-[#7C7C6B]/40 bg-[#A5B86C]/45 p-6 shadow-sm">
        <h2 class="text-xl font-semibold">Fotos de la ruta</h2>
        <div id="photos-container" class="mt-4 grid gap-4 sm:grid-cols-2"></div>

        <form id="photo-form" class="mt-6 rounded-xl border border-[#7C7C6B]/40 bg-[#A7D3E6]/70 p-4">
          <h3 class="text-lg font-semibold">Subir una foto</h3>
          <p id="photo-form-message" class="mt-1 text-sm text-[#1E4C6D]/70"></p>
          <input type="file" id="photo-input" name="photo" accept="image/*" class="mt-3 w-full rounded-lg border border-[#7C7C6B]/60 bg-[#A7D3E6]/70 px-3 py-2 text-sm text-[#1E4C6D]" />
          <button type="submit" class="mt-3 inline-flex items-center justify-center rounded-lg bg-[#1E4C6D] px-4 py-2 text-sm font-semibold text-[#A7D3E6] shadow hover:bg-[#8C6E4A] focus:outline-none focus:ring-2 focus:ring-[#1E4C6D]/40">Subir foto</button>
        </form>
      </section>

      <!-- Reviews -->
      <section class="rounded-2xl border border-[#7C7C6B]/40 bg-[#A7D3E6]/70 p-6 shadow-sm">
        <h2 class="text-xl font-semibold">Opiniones</h2>
        <div id="reviews-container" class="mt-4 space-y-3"></div>
        <p id="reviews-pagination-info" class="mt-2 text-sm text-[#1E4C6D]/70"></p>
        <div class="mt-3 flex flex-wrap gap-3">
          <button id="reviews-prev" type="button" class="inline-flex items-center justify-center rounded-lg border border-[#1E4C6D]/60 bg-[#A7D3E6]/70 px-3 py-2 text-sm font-medium text-[#1E4C6D] shadow-sm hover:bg-[#A5B86C]/70 focus:outline-none focus:ring-2 focus:ring-[#1E4C6D]/30">Reviews anteriores</button>
          <button id="reviews-next" type="button" class="inline-flex items-center justify-center rounded-lg border border-[#1E4C6D]/60 bg-[#A7D3E6]/70 px-3 py-2 text-sm font-medium text-[#1E4C6D] shadow-sm hover:bg-[#A5B86C]/70 focus:outline-none focus:ring-2 focus:ring-[#1E4C6D]/30">Reviews siguientes</button>
        </div>

        <hr class="my-6 border-[#7C7C6B]/40" />

        <form id="review-form" class="rounded-xl border border-[#7C7C6B]/40 bg-[#A5B86C]/45 p-4">
          <h3 class="text-lg font-semibold">Dejar una review</h3>
          <p id="review-form-message" class="mt-1 text-sm text-[#1E4C6D]/70"></p>

          <label for="review-rating" class="mt-4 block text-sm font-medium text-[#1E4C6D]">Valoración (1-5)</label>
          <input
            type="number"
            id="review-rating"
            name="rating"
            min="1"
            max="5"
            required
            class="mt-1 w-full rounded-lg border border-[#7C7C6B]/60 bg-[#A7D3E6]/70 px-3 py-2 text-[#1E4C6D] shadow-sm focus:border-[#6BAA3D] focus:outline-none focus:ring-2 focus:ring-[#6BAA3D]/40"
          />

          <label for="review-comment" class="mt-4 block text-sm font-medium text-[#1E4C6D]">Comentario</label>
          <textarea
            id="review-comment"
            name="comment"
            rows="3"
            placeholder="¨Qu‚ tal ha sido la ruta?"
            class="mt-1 w-full rounded-lg border border-[#7C7C6B]/60 bg-[#A7D3E6]/70 px-3 py-2 text-[#1E4C6D] shadow-sm placeholder:text-[#7C7C6B] focus:border-[#6BAA3D] focus:outline-none focus:ring-2 focus:ring-[#6BAA3D]/40"
          ></textarea>

          <button type="submit" class="mt-4 inline-flex items-center justify-center rounded-lg bg-[#1E4C6D] px-4 py-2 text-sm font-semibold text-[#A7D3E6] shadow hover:bg-[#8C6E4A] focus:outline-none focus:ring-2 focus:ring-[#1E4C6D]/40">Enviar review</button>
        </form>
      </section>
    </main>
  </div>

  <div id="footer-placeholder"></div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script src="js/layout.js" defer></script>
  <script src="js/auth.js" defer></script>
  <script src="js/detalle.js" defer></script>
</body>
</html>
